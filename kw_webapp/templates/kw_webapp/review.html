
{% extends "kw_webapp/base.html" %}
{% load staticfiles %}
<!--Load review scripts-->
{% block scripts %}
    <script src="{% static "js/review.js"%}"></script>
    <script src="{% static "js/wanakana.min.js" %}"></script>
{% endblock scripts %}

{% block content %}
<div class="container-full">
    <div class="row">
        <div class="col-md-1">
               <a href="{% url "kw:home" %}" class="center-block"><button class="btn btn-primary btn-lg"><i class="glyphicon glyphicon-home"></i></button></a>
        </div>
        <h1 id="meaning" class="col-md-10 text-center">Meaning</h1>
        <h1 class="text-center col-md-1" id="reviews-left">1</h1>
    </div>
    <div class="row">
        <input type="text" class="col-md-12 text-center" id="user-answer" placeholder="答え" style="font-size: 44pt">
        <input type="hidden" id="us-id" value="Nothing!">
        <button id="check"></button>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div class="row">
                <a href="#"  id="button-reading" class="btn btn-primary disabled btn-lg col-md-12">Show <strong>P</strong>honetic</a>
            </div>
            <div class="row">
                <div id="details-reading" class="jumbotron">
                    <p id="kana" class="text-center" style="font-size: 44pt">Placeholder!</p>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="row">
                <a href="#" id="button-character" class="btn btn-primary disabled btn-lg col-md-12">Show <strong>K</strong>anji</a>
            </div>
            <div class="row">
                <div id="details-character" class="jumbotron">
                    <p id="character" class="text-center" style="font-size: 44pt">Placeholder Kanji</p>
                 </div>
            </div>
        </div>
    </div>
</div>

<form>
<input type="hidden" id="csrf" value="{{ csrf_token }}">
</form>


<script>
    var vocabulary_list = [
        {% for item in object_list %}
        {
            'user_specific_id':'{{ item.id }}',
            'meaning':'{{ item.vocabulary.meaning }}',
            'readings':  [{% for reading in item.vocabulary.reading_set.all %}{% if reading.level <= user.profile.level %}'{{ reading.kana }}',{% endif %}{% endfor %}],
            'characters':[{% for reading in item.vocabulary.reading_set.all %}{% if reading.level <= user.profile.level %}'{{ reading.character }}',{% endif %}{% endfor %}],
        },
        {% endfor %}
    ];
    console.log(vocabulary_list);
    var current_vocab;
    $("#reviews-left").html(vocabulary_list.length)
    current_vocab = vocabulary_list.shift();
    console.log(current_vocab.meaning);
    $("#details-character").hide();
    $("#details-reading").hide();
    $("#meaning").html(current_vocab.meaning);
    $("#us-id").val(current_vocab.user_specific_id);
    $("#kana").html("");
        for(i = 0; i < current_vocab.readings.length; i++){
            $("#kana").append(current_vocab.readings[i] + "</br>");
        }
        $("#character").html("");
        for(i = 0; i < current_vocab.characters.length; i++){
            $("#character").append(current_vocab.characters[i] + "</br>");
        }



</script>
{% endblock %}
