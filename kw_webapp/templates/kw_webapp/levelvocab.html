{% extends "kw_webapp/logged_in.html" %}
{% load staticfiles %}
{% block scripts %}
  {{ block.super }}
  <script src="{% static "js/levelvocab.js" %}"></script>
{% endblock %}

{% block content %}
  {{ block.super }}

<input type="hidden" id="csrf" value="{{ csrf_token }}">

<section class="vocab-section">
  <div class="inner">
    <h1 class="section-heading">
      <a href="{% url "kw:vocabulary" %}">Vocabulary</a><span class="breadcrumb">Level {{ selected_level }}</span>
    </h1>

    <ul class="vocab-list">
      {% for review in reviews %}
        {% if review.hidden == False %}
          <li class="vocab-card">
        {% else %}
          <li class="vocab-card -locked -unlockable">
        {% endif %}

        <div class="vocab-base">
          <!-- FIXME: @tadgh can you tease the logic to show the first kanji only, but still multiple kana/meaning -->
          {% for reading in review.vocabulary.reading_set.all %}
          <div class="readingset">
            <span lang="ja" class="kanji">{{ reading.character }}</span>
            <span lang="ja" class="kana">{{ reading.kana }}</span>
            <!-- TODO: indivdual meanings would be better as inline elements inside meaning wrap -  so they can line-break an entire multi-word meaning (rather than mid-meaning) -->
            <span class="meaning">{{ reading.vocabulary.meaning }}</span>
          </div>
          {% endfor %}

          {% if review.hidden == False %}
            <!-- <span class="fa fa-unlock" title="Relock" data-pk="{{ review.id }}"></span> -->
          {% else %}
            <!-- <span class="fa fa-lock" data-pk="{{ review.id }}"></span> -->
          {% endif %}

        </div>


        {% comment 'not ready for production' %}
        <!-- FIXME: @tadgh In testing this only seemed to show apprentice icon. Did I break the logic trying to condense it into elifs? See old template below. Or does this review.streak not do what I think it does? -->
        <div class="vocab-extra">
          {% if review.streak > 8 %}
            <span class="icon icon-burned" title="KaniWani Level - Burned"></span>
          {% elif review.streak > 7 %}
              <span class="icon icon-enlightened" title="KaniWani Level - Enlightened"></span>
          {% elif review.streak > 5 %}
            <span class="icon icon-guru" title="KaniWani Level - Guru"></span>
          {% elif review.streak > 2 %}
            <span class="icon icon-master" title="KaniWani Level - Master"></span>
          {% else %}
            <span class="icon icon-apprentice" title="KaniWani Level - Apprentice"></span>
          {% endif %}

          <div class="synonyms">
            <span class="text">User synonyms:</span>

            <!-- TODO: possible approach using separate contentEditable <li>s
                 http://codepen.io/chriscoyier/pen/LVEdJg -->

            <ul class="list">
              <li class="item">Implementing</li>
              <li class="item">Soon but not yet!</li>
            </ul>
          </div>

          <a href="#" class="extratoggle fa fa-ellipsis-v"></a>

        </div>
        {% endcomment %}

      </li>
    {% endfor %}
    </ul>

  </div>
</section>

{% endblock %}



{% comment 'old template' %}

<input type="hidden" id="csrf" value="{{ csrf_token }}">

<main role="main">
  <header>
    <h1><a href="{% url "kw:vocabulary" %}">Vocabulary</a> > <span>Level &lt;{{ selected_level }}&gt;</span></h1>
  </header>

  <ul class="vocab__list">
      {% for review in reviews %}
        {% if review.hidden == False %}
          <li class="vocab__item">
        {% else %}
          <li class="vocab__item vocab__item--locked">
        {% endif %}
          <div class="vocab-upper">
            {% for reading in review.vocabulary.reading_set.all %}
              <div class="vocab__reading">
                <span class="vocab__kanji">{{ reading.character }}</span>
                <span class="vocab__kana">{{ reading.kana }}</span>
                <span class="vocab__meaning">{{ reading.vocabulary.meaning }}</span>
              </div>
            {% endfor %}

            {% if review.hidden == False %}
              <a href="#" class="fa fa-unlock" title="Unlocked" data-pk="{{ review.id }}"><span class="visually-hidden">Unlocked</span></a>
            {% else %}
              <a href="#" class="fa fa-lock" title="Unlockable" data-pk="{{ review.id }}"><span class="visually-hidden">Unlockable</span></a>
            {% endif %}
          </div>
          <div class="vocab-lower">
            {% if review.streak > 8 %}
              <span class="icon icon-burned" title="KaniWani Level - Burned"></span>
            {% else %}
              {% if review.streak > 7 %}
                <span class="icon icon-enlightened" title="KaniWani Level - Enlightened"></span>
              {% else %}
                {% if review.streak > 5 %}
                  <span class="icon icon-guru" title="KaniWani Level - Guru"></span>
                {% else %}
                  {% if review.streak > 2 %}
                    <span class="icon icon-master" title="KaniWani Level - Master"></span>
                  {% else %}
                    <span class="icon icon-apprentice" title="KaniWani Level - Apprentice"></span>
                  {% endif %}
                {% endif %}
              {% endif %}
            {% endif %}

            <div class="vocab-synonyms">
              User synonyms: <span contentEditable="true">{{ review.synonyms_string }}</span><!--
              <ul class="vocab-synonyms__list">
                <li class="vocab-synonyms__item" contentEditable="true">Birth anniversary</li>
                <li class="vocab-synonyms__item" contentEditable="true">That day of the year</li>
              </ul> -->
            </div>
            <a href="#" class="vocab-lower__toggle fa fa-plus"></a>
          </div>
        </li>
      {% endfor %}
    </ul>
  </main>

  {% endcomment %}
