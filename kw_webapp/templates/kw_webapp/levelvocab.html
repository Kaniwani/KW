{% extends "kw_webapp/logged_in.html" %}
{% load humanize %}
{% load staticfiles %}
{% block scripts %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static "css/level-vocab.css" %}">

  <script src="{% static "js/notify.min.js" %}"></script>
  <script src="{% static "js/levelvocab.js" %}"></script>
{% endblock %}
{% block content %}
  {{ block.super }}
  <table class="table level-vocab">
    <thead>
      <tr class="level-vocab__heading">
        <th class="level-vocab__meaning">Meaning</th>
        {# <th class="level-vocab__need-review">Needs Review</th> #}
        <th class="level-vocab__readings">Readings</th>
        <th class="level-vocab__next-review">Next Review</th>
        <th class="level-vocab__toggle-hidden">Toggle Hidden</th>
      </tr>
    </thead>
    <tbody>
      {% for review in reviews %}
        <tr class="level-vocab__row">
          <td class="level-vocab__meaning">{{ review.vocabulary.meaning }}</td>
          {# <td class="level-vocab__need-review">{{ review.needs_review }}</td> #}
          <td class="level-vocab__readings">
            {% for reading in review.vocabulary.reading_set.all %}
              <ruby>
                <span>{{ reading.character }}</span>
                <rp> (</rp>
                <rt>
                  {{ reading.kana }}
                </rt>
                <rp>) </rp>
              </ruby>
              {# {% if not forloop.last %}, {% endif %} #}
            {% endfor %}
          </td>
          <td class="level-vocab__next-review">{{ review.next_review_date|naturaltime }}</td>
          {% if review.hidden %}
          <td class="level-vocab__toggle-hidden">
            <button type="button" class="btn btn-success togglehide" id={{ review.pk }}>Unlock</button>
          </td>
          {% else %}
          <td class="level-vocab__toggle-hidden">
            <button type="button" class="btn btn-danger togglehide" id={{ review.pk }} >Lock</button>
          </td>
          {% endif %}
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <form>
    <input type="hidden" id="csrf" value="{{ csrf_token }}"></input>
  </form>
{% endblock %}